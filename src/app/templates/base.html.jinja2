<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <title>Document</title>
</head>

<body>
    <div class="main-wrapper">
        {% block nav %}
            <div class="nav">
                <a href="{{ url_for('home') }}">Home</a>
                <a href="{{ url_for('billing.home') }}">Billing</a>
                <a href="{{ url_for('invoicing.home') }}">Invoicing</a>
            </div>
        {% endblock nav %}

        {% with messages = get_flashed_messages() %}
            {% if messages %}
            <ul class="messages">
            {% for message in messages %}
                <li class="{{ message[0] }}">{{ message[1] }}</li>
            {% endfor %}
            </ul>
            {% endif %}
        {% endwith %}

        {% block html_body %}
            <h2>Home</h2>
            {% if statistics %}
            <table>
                <tr>
                    <th>Year</th>
                    <th>Positions</th>
                    <th>Billed</th>
                    <th>Earned</th>
                    <th>Invoiced</th>
                </tr>
                {% for statistic in statistics %}
                    <tr>
                        <td>
                        {% if statistic.year %}
                            {{ statistic.year }}
                        {% else %}
                            Total
                        {% endif %}
                        </td>
                        <td>{{ statistic.count_positions }}</td>
                        <td>{{ '%0.2f' % statistic.total_billed }}</td>
                        <td>{{ '%0.2f' % statistic.total_earned }}</td>
                        <td>{{ '%0.2f' % statistic.total_invoiced }}</td>
                    </tr>
                {% endfor %}
            </table>
            {% endif %}
        {% endblock html_body %}
    </div>
</body>
</html>